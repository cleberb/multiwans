# Lista TO DO

- [x] Regras de validação para parâmetros globais.
- [x] Melhorar logs de erros em conntrack
- [x] Melhorar tratamento de regras para endereços de ping:
  - [x] Exigir no mínimo 1 endereço IP
  - [x] Recomendar que o endereço IP seja o primeiro da lista para agilizar os testes
  - [x] A mesma validação de global, ser aplicada em configuração personalizada em WANS
- [x] Reduzir tempo de teste de links
- [x] Melhorar lógica de sleepTest em decorrência do tempo de execução do último teste de link.
- [x] Não usar módulo/lib externo para garantir um repositório único do projeto.
  - [x] Mapear quais funções serão migradas para o multiwans
- [x] Validar a estrutura dos logs no console e no corpo do e-mail.
- [ ] Comentar as funções
  - [ ] Usar shdoc?
- [x] Revisar a mensagem de invalidParam()
- [x] Validar que mark está sendo salvo em conntrack, para garantir o filtro de exclusão de registros.
- [ ] Editar README.md
  - [ ] Falar de STATUS_FILE, e como monitorar ele.
- [x] STATUS_FILE ser um parâmetro de config.yaml?
- [x] Revisar envio de e-mail
  - [x] definições de servidor, usuário e senha devem ficar definidas no arquivo de configuração?
  - [x] Assunto e status.
- [x] Melhorado estrutura de tabelas
- [x] ícones em formato unicode
- [x] Mudar estrutura yaml de ping, dns e alert para igual a config de e-mail
- [x] Criar arquivo config.example.yaml com valores genéricos
  - [ ] Criar valores de WANS, com todas as possibilidades de campos, pode deixar comentado no arquivo.
- [x] getConfig() retornar lista separado por virgula? ou seria melhor valores por linha e evitar uso de IFS=, ?
- [x] Configurações globais serem definidas em variáveis globais em checkConfig()?
- [x] Criar lógica de diretório de scripts UP() e DOWN()
  - [ ] Verificar se tem scripts sem permissão de execução?
- [x] Verificar conflito de checkConfig e statusFile.
- [x] Revisar config.yaml
- [x] Garantir rpfilter esteja desativado em todas as interfaces
  - [x] Criar teste de testRpFilter
- [x] Revisão do campo status e duração em runtime()
- [x] Revisar testRouteTable()
- [x] Revisar mensagem de link online no start
- [x] Tratar caracteres invisíveis em ícones
- [x] Revisar uptime(), uso de virgula
- [x] corrigir indentação de _info() quando possui logs
- [x] Revisar monitoramento
  - [x] Revisar runInterval
  - [x] Não mostrou mensagem que o link foi reestabelecido
  - [x] mensagens de conntrackDelete()?
  - [x] Alterado ícone warning.
  - [x] Avaliar o uso de startingStatus, chamar setOnWan ou apenas setStatusWAN id ON?
  - [x] Revisar scriptHelper com um teste de exemplo
- [x] Remover declaração de configurações globais do objeto YAML, após setado variáveis globais, reduzindo objeto
- [x] Variáveis globais para e-mail
- [x] Definir intervalo de envio de alertas
- [x] Teste de resolução de DNS em pings
- [x] Em caso de falha de ping, gerar warning, não error
- [x] Gerar warning em caso de erro de DNS
- [x] Unificar as chamadas de footer + runTime + INFO_WANS
- [ ] Existe mudança de estado sem ter ocorrido um erro?
- [x] Testar lista de IP's localnets.
  - [ ] Após redefinir a lista em caso de falha, é necessário executar um conntrack delete?
- [ ] Se o link padrão for um com mark=2, como o conntrackDelete() irá se comportar? visto que ele remove apenas mark=0.
      Talvez seja necessário excluir tudo que não for marcação do link atual.
- [x] trocar o nome da lista ipset de localnets para multiwans-localnets, para não ter conflito de nome com outras listas.
- [ ] Validar fluxo de dados via FORWARD e OUTPUT e regras iptables
